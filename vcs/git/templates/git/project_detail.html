{% extends "git/base.html" %} {% block content %}
<article class="media content-section">
  <img class="rounded-circle article-img" src="{{ object.owner.profile.image.url }}" />
  <div class="media-body">
    <div class="article-metadata">
      <span><i>owner: </i></span><a class="mr-2" href="{% url 'profile' %}">{{ object.owner }}</a>
      <small class="text-muted">{{ object.date_created|date:"F d, Y" }}</small>
      {% if object.owner == user %}
      <div>
        <a class="btn btn-info btn-sm  mt-1 mb-1" href="{% url 'project-update' object.id %}">Edit</a>
        <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'project-delete' object.id %}">Delete</a>
      </div>
      {% endif %}
    </div>
    <h2 class="article-title">{{ object.name }}</h2>
    <p class="article-content"><i>{{ object.description }}</i></p>
    <a class="mr-2" href="{{ object.git_repo}}">View in GitHub</a>
  </div>
</article>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#issues">Issues</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#milestones">Milestones</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#labels">Labels</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#collaborators">Collaborators</a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane container active" id="issues">
    <p class="mt-3">There are currently no issues attached to this project.</p>
  </div>

  <div class="tab-pane container fade" id="milestones">
    <a class="btn btn-success btn-sm mt-3 mb-3" href="{% url 'milestone-form' object.id %}">Add milestone</a>
    {% for milestone in milestones %}
    <article class="media content-section">
      <div class="media-body">
        <h2><a class="article-title">{{ milestone.title }}</a></h2>
        <p class="text-muted">
          <i class="fa fa-calendar"></i>
          <strong style="margin-right: 15px">due date: {{milestone.due_date|date:"F d, Y"}}</strong>
        </p>
        <p class="text-muted">
          {{milestone.state}}
        </p>
        <h5 class="text-muted">
          <i>{{milestone.description}}</i>
        </h5>
      </div>
      <button class="btn btn-info btn-sm mt-3 mb-3 mr-1">Edit</button>
      <br />
      <form action="{% url 'delete-milestone' milestone.id milestone.project.id %}" method="post">
        {% csrf_token %}
        <input type="submit" class="btn btn-danger btn-sm mt-3 mb-3" value="Delete" />
      </form>
    </article>
    {% empty %}
    <p class="mt-3">There are currently no milestones attached to this project.</p>
    {% endfor %}
  </div>

  <div class="tab-pane container fade" id="labels">
    <a class="btn btn-success btn-sm mt-3 mb-3" href="{% url 'label-create' project.id %}">Add label</a>
      {% for label in labels %}
        <article class="media content-section">
          <div class="media-body">
            <h5><a class="article-title" style="color: white; background: {{label.color}}">{{ label.title }}</a></h5>
            <p class="text-muted">
              <a >Edit</a>
              <a >Delete</a>
            </p>
          </div>
          <h5 class="text-muted">
                {{label.description}}
          </h5>
        </article>
    {% empty %}
          <p>There are currently no labels attached to this project.</p>    
    {% endfor %}
  </div>


  <div class="tab-pane container fade" id="collaborators">
    <a class="btn btn-success btn-sm mt-3 mb-3" href="{% url 'new-collaborator' project.id %}">Add collaborator</a>
    {% for collaborator in object.collaborators.all %}
    <article class="media mt-3">
      <img class="rounded-circle article-img" src="{{ collaborator.profile.image.url }}" />
      <div class="media-body">
        <h3 class="article-title">{{ collaborator.username }}</h3>
        <p class="article-content"><i>Collaborator</i></p>
        <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'collaborator-delete' project.id collaborator.id %}">Delete</a>
      </div>
    </article>
    {% empty %}
    <p class="mt-3">There are currently no collaborators attached to this project.</p>
    {% endfor %}
  </div>

</div>
{% endblock content %}